(function(e){"use strict";function i(e,t,n){var r=undefined;if(e&&t){r=n.closest(e).find(t);if(r.length==0){r=undefined}}return r}function s(t,n){var r=n.data("replace"),s=n.data("replace-closest"),o=n.data("replace-inner"),u=n.data("replace-closest-inner"),a=i(n.data("replace-father"),n.data("replace-child"),n),f=i(n.data("replace-father"),n.data("replace-child-inner"),n),l=n.data("append"),c=n.data("prepend"),h=n.data("refresh"),p=n.data("refresh-closest"),d=n.data("refresh-inner"),v=i(n.data("refresh-father"),n.data("refresh-child"),n),m=i(n.data("refresh-father"),n.data("refresh-child-inner"),n),g=n.data("clear"),y=n.data("clear-closest"),b=n.data("remove"),w=n.data("remove-closest");if(r){e(r).replaceWith(t.content)}if(s){n.closest(s).replaceWith(t.content)}if(o){e(o).html(t.content)}if(a){a.replaceWith(t.content)}if(f){f.html(t.content)}if(u){n.closest(u).html(t.content)}if(l){e(l).append(t.content)}if(c){e(c).prepend(t.content)}if(h){e.each(e(h),function(t,n){ajaxGet(e(n).data("refresh-url"),function(t){e(n).replaceWith(t)})})}if(p){e.each(e(p),function(t,r){ajaxGet(e(r).data("refresh-url"),function(t){n.closest(e(r)).replaceWith(t)})})}if(v){e.each(v,function(t,n){ajaxGet(e(n).data("refresh-url"),function(t){e(n).replaceWith(t)})})}if(m){e.each(m,function(t,n){ajaxGet(e(n).data("refresh-url"),function(t){e(n).html(t)})})}if(g){e(g).html("")}if(b){e(b).remove()}if(y){n.closest(y).html("")}if(w){n.closest(w).remove()}}var t="[data-ajax-submit]";var n="[data-ajax]",r=function(r){e(r).on("click",n,this.send);e(r).on("submit",t,this.submit)};r.prototype.send=function(t){var n=e(this),r=n.data("method"),i=n.attr("href")||n.data("href")||n.data("url")||null,o=n.data("data")||null,u=n.data("success")||null,a=n.data("error")||null;if(t)t.preventDefault();if(!i){alert("href, data-href or data-url attribute not found!");return}if(u){try{u=window[u];if(!e.isFunction(u))u=null}catch(t){alert(t.name+"\n"+t.message)}}if(a){try{a=window[a];if(!e.isFunction(a))a=null}catch(t){alert(t.name+"\n"+t.message)}}r=r?r.toLowerCase():"get";i=i&&i.replace(/.*(?=#[^\s]*$)/,"");o=o&&o.replace(/'/g,'"');try{o=e.parseJSON(o)}catch(t){alert(t.name+"\n"+t.message);return}if(ajax&&e.isFunction(ajax))ajax(i,{method:r,data:o,onSuccess:function(t){s(t,n);e.isFunction(u)&&u(t.content)},onError:a});else alert("jquery.ajax.js is required")};r.prototype.submit=function(t){var n=e(this),r=n.attr("action"),i=n.attr("method"),o=n.serialize();t.preventDefault();i=i?i.toLowerCase():"get";if(i=="post"){ajaxPost(r,o,function(e){var t={};t.content=e;s(t,n)})}else{ajaxGet(r,function(e){var t={};t.content=e;s(t,n)})}};var o=e.fn.ajax;e.fn.ajax=function(t){return this.each(function(){var n=e(this),i=n.data("django.ajax");if(!i)n.data("django.ajax",i=new r(this));if(typeof t=="string")i[t].call(n)})};e.fn.ajax.Constructor=r;e.fn.ajax.noConflict=function(){e.fn.ajax=o;return this};e(document).on("click.ajax.data-api",n,r.prototype.send);e(document).on("submit.ajax.data-api",t,r.prototype.submit)})(jQuery)