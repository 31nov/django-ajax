/* ========================================================================
 * Django Ajax: jquery.ajax.plugin.js v2.2.2
 * https://github.com/yceruto/django-ajax/
 * Copyright 2014 Yonel Ceruto Glez
 * ======================================================================== */
(function(e){"use strict";function r(t,n){var r=n.data("replace"),i=n.data("replace-closest"),s=n.data("replace-inner"),o=n.data("replace-closest-inner"),u=n.data("append"),a=n.data("prepend"),f=n.data("refresh"),l=n.data("refresh-closest"),c=n.data("clear"),h=n.data("remove"),p=n.data("clear-closest"),d=n.data("remove-closest");if(r){e(r).replaceWith(t.content)}if(i){n.closest(i).replaceWith(t.content)}if(s){e(s).html(t.content)}if(o){n.closest(o).html(t.content)}if(u){e(u).append(t.content)}if(a){e(a).prepend(t.content)}if(f){e.each(e(f),function(t,n){ajaxGet(e(n).data("refresh-url"),function(t){e(n).replaceWith(t)})})}if(l){e.each(e(l),function(t,r){ajaxGet(e(r).data("refresh-url"),function(t){n.closest(e(r)).replaceWith(t)})})}if(c){e(c).html("")}if(h){e(h).remove()}if(p){n.closest(p).html("")}if(d){n.closest(d).remove()}if(t.fragments){for(var v in t.fragments){e(v).replaceWith(t.fragments[v])}}if(t["inner-fragments"]){for(var m in t["inner-fragments"]){e(m).html(t["inner-fragments"][m])}}if(t["append-fragments"]){for(var g in t["append-fragments"]){e(g).append(t["append-fragments"][g])}}if(t["prepend-fragments"]){for(var y in t["prepend-fragments"]){e(y).prepend(t["prepend-fragments"][y])}}}var t="[data-ajax]",n=function(n){e(n).on("click",t,this.send)};n.prototype.send=function(t){var n=e(this),i=n.data("method"),s=n.attr("href")||n.data("href")||n.data("url")||null,o=n.data("data")||null,u=n.data("success")||null,a=n.data("error")||null;if(t)t.preventDefault();if(!s){alert("href, data-href or data-url attribute not found!");return}if(u){try{u=window[u];if(!e.isFunction(u))u=null}catch(t){alert(t)}}if(a){try{a=window[a];if(!e.isFunction(a))a=null}catch(t){alert(t)}}i=i?i.toLowerCase():"get";s=s&&s.replace(/.*(?=#[^\s]*$)/,"");o=o&&o.replace(/'/g,'"');try{o=e.parseJSON(o)}catch(t){alert(i.toUpperCase()+" "+s+"   PARSE JSON ERROR"+"\n"+o+"\n"+t);return}if(ajax&&e.isFunction(ajax))ajax(s,{method:i,data:o,onSuccess:function(t){e.isFunction(u)&&u(t.content);r(t,n)},onError:a});else alert("jquery.ajax.js is required")};var i=e.fn.ajax;e.fn.ajax=function(t){return this.each(function(){var r=e(this),i=r.data("django.ajax");if(!i)r.data("django.ajax",i=new n(this));if(typeof t=="string")i[t].call(r)})};e.fn.ajax.Constructor=n;e.fn.ajax.noConflict=function(){e.fn.ajax=i;return this};e(document).on("click.ajax.data-api",t,n.prototype.send)})(jQuery)
